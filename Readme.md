# JavaScriptフレームワークによるWebプログラミング　（サイバー大学2025年秋）

## Express
Node.jsに機能を追加してアプリケーション開発をより
簡単に行えるようにしたアプリケーションフレームワーク
Node.js本来の機能を活かした比較的小さなフレームワーク
GET/POST通信などを簡単な記述で実現できる。
最近はREST APIの開発に使用されることが多い。(バックエンド)


### Express Generator
Expressには用意されている、Webアプリケーションの雛形、
プロジェクトを作成してくれるツール。
-アプリケーションの基本部分を自動生成する。
-必要なパッケージが入っている。


•コマンド画面で以下のように入力
% npm install –g express-generator
•プロジェクトの作成
% express myapp
•依存関係をインストールして実行
% cd myapp
% npm install
% npm start
• ブラウザを立ち上げてhttp://localhost:3000 をアクセス


### npm installで行っていること
• プロジェクトに必要なパッケージをインストール
• 必要なパッケージは package.json に記載されているもの
• インストール先は node_modules フォルダー

### Npm startで行っていること
• Bin フォルダーの wwwを実行
• 通常はpackage.jsonの中にstartコマンドで
実行することを記述

•“bin”フォルダ
• アプリケーションを実行するためのコマンドファイルが保管されている
• 今回はwwwという実行ファイルがありこれが今回の実行ファイル

### “public”フォルダ
• 公開用ディレクトリ、ウェブアプリケーションで使うイメージ画像、
スクリプトファイル、スタイルシートが置かれている

### “route” フォルダ
• ルーティング(どのページにアクセスするか)を追加するための
スクリプトファイルが置かれている

### “view”フォルダ
• ページを表示するときのテンプレートファイルが置かれている。

### package.jsonについて
• アプリに必要なライブラリがリストされている。
• それらは“npm install”実行時に”node_module”フォルダ配下に
ダウンロードされる


## ルーティング
- 1.必要なモジュールをロード
    - http-errors: HTTPエラーの対処を行うもの
    - express: express本体
    - path: ファイルパスを扱う
    - cookie-parser: クッキーのパース(値の変換)
    - morgan: HTTPリクエストのログ出力に関するもの
- 2.ルート用モジュールのロード
    - ルートごとに用意されているプログラムをロードする作業
    - routesフォルダにindex.js, users.jsがあり、それをモジュールとしてロードしている。
    - index.jsは/indexにアクセスした時の、users.jsは/usersに
    アクセスした時の処理がまとめられている。
- 3.Express オブジェクトの作成と基本設定
    - Expressのオブジェクトを作成.またテンプレートエンジンの設定も行っている.ここではjadeというview engineを使用
- 4.関数の組み込み
    - 1でロードしたモジュールの機能を呼び出せるようにしたもの.app.useで関数を設定
- 5.ルート用、エラー用のapp.use
    - 上の2つはそれぞれ/(ルート)、/users用
- 6.module.exportsの設定
    -最後にexpressにappオブジェクトを設定


## 画面を作成するテンプレートについて

• Expressでは、 “テンプレートエンジン”を使用してNode.jsのスクリプトからWebページの表示(HTMLの出力)を行っている。
• “テンプレートエンジン”とは“テンプレート”というものを使用して、表示するコンテンツを生成するための仕組み。
• “テンプレート”には変数や値などを記述する仕組みが用意されており、それを利用して仮の値が埋め込まれている。
• Webページを表示する際にはテンプレートをテンプレートエンジンが読み込むことでHTMLに変換する。変換によって必要な値が全て読み込まれた状態のHTMLコードが生成され、生成されたコードが画面に出力される。

